<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
"-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="qna">

    <select id="qnaList" resultType="com.spring.dto.Qna">
        SELECT * FROM qna
        START WITH parno = 0
        CONNECT BY PRIOR no = parno
        ORDER SIBLINGS BY no DESC
    </select>
    
    <select id="getQna" parameterType="int" resultType="com.spring.dto.Qna">
        SELECT * FROM qna WHERE no = #{no}
    </select>
   
   <insert id="insQna" parameterType="com.spring.dto.Qna">
    INSERT INTO qna (no, plevel, parno, title, content, resdate, visited, aid)
    VALUES (qna_seq.NEXTVAL, #{plevel}, #{parno}, #{title}, #{content}, #{resdate,jdbcType=TIMESTAMP}, #{visited}, #{aid})
	</insert>

    <update id="upQna" parameterType="com.spring.dto.Qna">
    UPDATE qna
    SET title = #{title}, content = #{content}, resdate = #{resdate,jdbcType=TIMESTAMP}, visited = #{visited}, aid = #{aid}
    WHERE no = #{no}
	</update>

    <delete id="delQna" parameterType="int">
        DELETE FROM qna WHERE no = #{no}
    </delete>

</mapper>